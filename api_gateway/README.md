# Butler API Gateway

Butler API Gateway is a gateway that provides a single point of entry for all the microservices in the Butler AI Chat App. It is a reverse proxy that routes requests to the appropriate microservice.

## Installation

## Usage

## Design Decisions

List different aspects of problems and their documentation references.

### Localization :earth_africa:

Localization on the server-side plays a big role of sending localized error message to the client and labels for the client to display.

#### Client ➡️ Server requests

Client requests data by sending a the requested language's code in the `Accept-Language` header and the labels' keys in body.

#### Client ⬅️ Server responses

The server should not include a detailed, localized error message in the response. Instead, it should include a code that the client can use to look up the error message in the client's language file. Reasoning: a certain endpoint can only have a certain set of error codes (at a particular API version). So the client already knows what type of error message there can be and may request it from the localization server if not cached. This way, the server does not have to send localized messages to the client.

## API access

### HTTP Request

- `Accept-Version`: The version of the API to use. This is to ensure that the client and server are using the same version of the API. This is important because the server may change the response format in the future, and the client should be able to handle it.
- `Accept-Type`: The type of the response that the client wants. The server should send the response in the format that the client requested. Client should support fallbacks if the server does not support the requested format (e.g. JSON).

### HTTP Response

- `Content-Version`: The version of the API that the server used to generate the response.
- `Content-Type`: The type of the response. The server should send the response in the format that the client requested.

## Schemas and Models

### User

- `id`: The unique identifier of the user. Generated by the server via nanoid.
- `username`: The username of the user. This is unique. It can be used to login and identify the user in the app. Profile URL can be generated from this. This is shown if `display_name` is not set.
- `email`: The email of the user. This is unique. It can be used to login. Email is private and should not be shared with other users.
- `password`: The password of the user. This should be properly encrypted. It is used to authenticate the user.
- `display_name`: The public name of the user. This is public and shows on profile instead of `username`.

#### Registration

Required fields: `username`, `email`, `password`.

Example request:

```json
{
    "username": "john_doe",
    "email": "example@domain.com",
    "password": "password123"
}
```

#### Login

Required fields: `username` or `email`, `password`.

#### Profile

Common fields:

- `id`: The unique identifier of the user. Generated by the server via nanoid.
- `username`: The username of the user. This is unique. It can be used to login and identify the user in the app. Profile URL can be generated from this. This is shown if `display_name` is not set.
- `display_name`: The public name of the user. This is public and shows on profile instead of `username`.
- `email`: The email of the user. This is unique. It can be used to login. Email is private and should not be shared with other users.

Fields that are only required if the user **creates a chatbot** or a **business** account:

- `phone`: The phone number of the user. This is private and should not be shared with other users.
- `address`: The address of the user. This is private and should not be shared with other users.
- `full_name`: The full name of the user. This is private and should not be shared with other users.

## Resources

Butler API Gateway is built using the following resources:

- [Google API Design Guide](https://cloud.google.com/apis/design)
- [OpenAPI Best Practices](https://learn.openapis.org/best-practices.html)